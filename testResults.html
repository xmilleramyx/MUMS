<!doctype html>

<html lang="en">
<head>
  	<meta charset="UTF-8">
	<title>Test Setup</title>
	<meta name=“viewport” content=“width=device-width, intitial-scale=1.0”>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	
	<link rel="javascript" type="text/javascript" href="css/bootstrap.min.js">
  	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  	<link rel="stylesheet" href="css/login.css">

    <script src="https://cdn.firebase.com/js/client/2.4.0/firebase.js"></script>
    <script src='js/testResults.js'></script>
    
    <style>
        .results {
            background: white;
            border-radius: 5px; 
            padding: 10px;
            margin-bottom: 15px;
            height: 40px;
        }
        
        .result_value {
            height: 42px;
            padding: 10px;
            position: relative;
            left: 10px;
        }
    
    </style>
    


</head>

<body>
    
	<!--Horizontal Nav Bar at Top, credit to http://www.bootply.com/98314-->
		<nav class="navbar navbar-default" role="navigation">
		  <div class="navbar-header">
		    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		      <span class="icon-bar"></span>
		      <span class="icon-bar"></span>
		      <span class="icon-bar"></span>
		    </button>    
		  </div>
		  <a class="navbar-brand" href="#">MUMS</a>
		  <div class="navbar-collapse collapse">
		    <ul class="nav navbar-nav navbar-right">
		      <li>
		      	<a onclick="profile_href()">
		      		<span class="glyphicon glyphicon-camera" aria-hidden="true"></span> View Profile</a>
		      </li>
		      <li><a href="Dashboard.html"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> View Database</a>
		      </li>
		    </ul>
		  </div>
		</nav>
	<!--end nav bar-->
    <div id="my_photo_booth">
        <div id="my_camera"></div>


        <script type="text/javascript" src="cam/webcam.js"></script>

        <script language="JavaScript">
            Webcam.set({
                width: 640,
                height: 480,
                image_format: 'jpeg',
                jpeg_quality: 90,

                // flip horizontal (mirror mode)
                flip_horiz: true
            });
            Webcam.attach( '#my_camera' );
        </script>

        <form>
            <div id="pre_take_buttons">
                <input type=button value="Take Pic" onClick="preview_snapshot()">
            </div>
        </form>
    </div>
    <div id="results" style="display:none">
    </div>
    <canvas id="example" width="750" height="100"></canvas>
    <div id= "reload" style="display:none">
        <input type=button value="Retake"  onClick="location.reload();">
    </div>
   <!--<canvas id="example" width="750" height="100"></canvas>-->
    <br>
    <button type="button" class="btn btn-default" onclick="calcResult()">Calculate Results</button>
    <button type="button" class="btn btn-default" onclick="add()">Save Results to Database</button>
    
    
    <br>
    <br>
    
    <div id="calculatedResults" style="background: #e6e6e6; padding: 20px">
        <h4 id="resultsTitle">Results:</h4>
        <div class="results">
            <b>Glucose       </b>
            <span id="glucose_result" class="result_value"></span>
        </div>
        <div id="billrubin" class="results">
            <b>Billrubin       </b>
            <span id="billrubin_result" class="result_value"></span>
        </div>
        <div id="ketone" class="results">
            <b>Ketone       </b>
            <span id="ketone_result" class="result_value"></span>
        </div>
        <div id="pH" class="results">
            <b>pH       </b>
            <span id="pH_result" class="result_value"></span>
        </div>
        <div id="protein" class="results">
            <b>Protein       </b>
            <span id="protein_result" class="result_value"></span>
        </div>
    </div>

    <script language="JavaScript">

        function preview_snapshot() {
            var test;
            Webcam.snap( function(data_uri) {
                test = data_uri;
                document.getElementById('results').innerHTML = '<img src="'+data_uri+'"/>';
                Webcam.reset();
                document.getElementById('my_photo_booth').style.display = 'none';
                document.getElementById('reload').style.display = '';
            });
            var image = new Image(),
                    canvas = document.getElementById('example'),
                    ctx = canvas.getContext('2d');
            image.src = test;

            image.onload = function(){
                ctx.drawImage(image,0,300,750,100,0,0,750,100);
            }
        }
    </script>
</body>

</html>