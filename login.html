<!doctype html>

<html lang="en">
<head>
  	<meta charset="UTF-8">
	<title>MUMS Login</title>
	<meta name=“viewport” content=“width=device-width, intitial-scale=1.0”>

    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"> 
  	<link rel="stylesheet" href="css/style.css">
    
    <script src="https://cdn.firebase.com/js/client/2.4.0/firebase.js"></script>
</head>

<body>

    
<div class="login-page">
  <div class="form">
    <form name="login" class="login-form">
          <input type="email" id="userid" placeholder="email address"/>
          <input type="password" id="pswrd" placeholder="password"/>
          <button id="buttonLogin" value="Login">login</button>
          <p class="message" onclick="toggleViews()">Not registered? <a href="#">Create an account</a></p>
    </form>
      
    <form class="register-form">
          <input type="text" id="makeuserid" placeholder="resgister with email"/>
          <input type="password" id="makepswrd" placeholder="password"/>
          <button id="buttonNew" value="Create Account">create</button>
          <p class="message" onclick="toggleViews()" >Already registered? <a href="#">Sign In</a></p>
    </form>


  </div>
</div>
    
<script>

        var ref = new Firebase("https://mums.firebaseio.com");
    
        function checkLogin(){
            var userid = $('#userid').val();
            var pswrd = $('#pswrd').val(); 
            
            ref.authWithPassword({
                email    : userid,
                password : pswrd
            }, function(error, authData) {
                if (error) {
                    alert("Login Failed!", error);
                } else {
                    console.log("Authenticated successfully with payload:", authData);
                    window.location.href = 'Dashboard.html';
                }
            });
        }

        function createNew() {
            var makeuserid = $('#makeuserid').val();
            var makepswrd = $('#makepswrd').val(); 
            ref.createUser({
                    email    : makeuserid,
                    password : makepswrd
                }, 
                function(error, userData) {
                    if (error) {
                        alert(error);
                    } else {
                        console.log("Successfully created user account with uid:", userData.uid);
                        window.location.href = 'login.html';
                    }
                });
        }
    
    document.getElementById("buttonLogin").onclick = checkLogin;
    document.getElementById("buttonNew").onclick = createNew;

    function toggleViews(){
        $('form').animate({height: "toggle", opacity: "toggle"}, "slow");
    };
    
    </script>


</body>
</html>