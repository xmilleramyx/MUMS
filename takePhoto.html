<!doctype html>
<!--image upload code credit to https://jsfiddle.net/Mori/53d5rbyj/-->
<!--image crop credit to http://www.html5tutorial.info/html5-canvas-image.php-->

<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Take Photo</title>
	<meta name=“viewport” content=“width=device-width, intitial-scale=1.0”>
	<script type="text/javascript" src="js/code.jquery.com/jquery-1.12.0.min.js"></script>
	<script src="https://cdn.firebase.com/js/client/2.4.0/firebase.js"></script>
	<script rel="javascript" type="text/javascript" href="js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
</head>
<body>
<!--
<div id="centeredContainer" class="col-md-6" style="height: 200px; width:200px; position: absolute; top:0; bottom: 0; left: 0; right: 0; margin: auto;">
-->
<div id="imgHolder">
	<p>No files selected!</p>
</div>

<!--File upload (hidden)-->
<input type="file" id="fileElem" accept="image/*" style="display:none" onchange="handleFiles(this.files)">
<!--link to select camera-->
<button class="btn btn-default" id="fileSelect" style="">Take Photo</button>
<canvas id="example" width="750" height="100"></canvas>
</div>



<!--<a href="showPhoto.html?selected=" + base64></a> -->

<script>
	window.URL = window.URL || window.webkitURL;

	var fileSelect = document.getElementById("fileSelect"),
			fileElem = document.getElementById("fileElem"),
			imgHolder = document.getElementById("imgHolder");

	fileSelect.addEventListener("click", function(e) {
		if (fileElem) {fileElem.click();
		}
		e.preventDefault(); // prevent navigation to "#"
	}, false);

	function handleFiles(files) {
		if (!files.length) {
			imgHolder.innerHTML = "<p>Strip Not Yet Tested</p>";
		}
		else
		{
			imgHolder.innerHTML = "";
			$('#fileSelect').hide();
			$('#sendPhoto').toggle();
			var imgCapture = document.createElement("img");
			imgCapture.src = window.URL.createObjectURL(files[0]);
			//img.height = 60;
			imgCapture.onload = function() {
				window.URL.revokeObjectURL(this.src);
			}
			//imgHolder.appendChild(imgCapture);
			//console.log(imgCapture.src);
			var reader = new window.FileReader();
			reader.readAsDataURL(files[0]);
			reader.onloadend = function()
			{
				var base64data = reader.result;
				//console.log(base64data);
				var image = new Image(),
						canvas = document.getElementById('example'),
						ctx = canvas.getContext('2d');
				image.src = base64data;
				image.onload = function(){
					ctx.drawImage(image,0,300,750,100,0,0,750,100);
				}
			};

			//var xu = document.getElementById(imgHolder);
			
			//var info = document.createElement("span");
			//info.innerHTML = files[0].name + ": " + files[0].size + " bytes";
			//imgHolder.appendChild(info);
			return imgCapture;
		}
	//	console.log(base64data );

		
	}

</script>



</body>
</html>